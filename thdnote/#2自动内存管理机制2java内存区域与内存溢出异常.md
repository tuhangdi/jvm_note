# 2.2 运行时数据区域

![jvm-tu-2.1](/assets/jvm-tu-2.1.png)

## 2.2.1 程序计数器(Program Counter Register)

- 一块较小的内存空间
- 当前线程所执行的字节码的行号指示器
- **线程私有** （由于java虚拟机的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，在任何一个确定的时刻，一个处理器（对于多核处理器是一个内核）只会执行一条线程中的指令。因此，为了线程切换后能恢复到正确的执行位置，每条线程都需要有一个独立的程序计数器，各条线程之间的计数器互补影响，独立存储，我们称这类内存区域为“线程私有”的内存）。
- 如果线程正在执行一个Java方法，计数器记录 *正在执行的虚拟机字节码指令的地址*
- 如果线程正在执行的是Native方法，计数器 *值为空(Undefined)*
- 此内存区域是 *唯一一个* 在Java虚拟机规范中没有规定任何OutOfMemoryError情况的区域。

## Java虚拟机栈

- 线程私有
- 生命周期与线程相同
- 每个方法被执行的时候都会同时创建一个栈帧(Stack Frame)用于存储 *局部变量表* 、 *操作栈* 、 *动态链接* 、*方法出口* 等信息。
- 每一个方法被调用直至执行完成的过程，对应着一个栈帧在虚拟机栈中从入栈到出栈的过程
